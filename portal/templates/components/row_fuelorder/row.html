{% load static i18n custom_components %}

<!-- Orders List -->
<article class="flex flex-col pt-2">
  <div class="h-12 rounded-full flex flex-nowrap p-1 {% status_color_component order.is_finished order.is_paused order.is_locked %}">
    <!-- HEAD -->
    <div class="h-full aspect-fibbo-up rounded-l-full flex flex-col items-center justify-center">
      <span class="text-sm tracking-wider font-bold font-rubik text-white uppercase leading-none">{{ order.operation_code }}</span>
      <span class="text-xxs font-Roboto text-white leading-tight">
        {% if order.is_finished %} {% translate "finished" %} {% elif order.is_paused %} {% translate "pauseed" %} {% elif order.is_locked %} {% translate "refueling" %} {% else %}
        {% translate "on_transit" %} {% endif %}
      </span>
    </div>
    <!-- MIDDLE-->
    <div class="h-full w-full flex overflow-clip">
      <div class="flex-grow flex flex-col lg:flex-row">
        <!-- Plates -->
        <div class="min-w-max h-full bg-sky-50 flex space-x-1 py-0.5 px-1 lg:flex-col lg:space-y-1 lg:space-x-0 lg:justify-center">
          <span class="bg-sky-900 text-white font-bold font-mono text-xxs lg:text-xs pt-1 px-2 leading-none w-fit"> {{ order.tractor_plate }} </span>
          {% if order.trailer_plate %}
          <span class="bg-sky-900 text-white font-bold font-mono text-xxs lg:text-xs pt-1 px-2 leading-none hidden sm:block w-fit"> {{ order.trailer_plate }} </span>
          {% endif %}
        </div>
        <!-- Driver -->
        <div class="min-w-max h-full bg-sky-50 flex space-x-1 pl-0.5 flex-nowrap lg:w-full">
          <span class="text-gray-800 font-mono text-xs lg:text-lg items-center flex p-1" style="white-space: nowrap">
            <p class="block sm:hidden leading-none">{{ order.driver|truncatechars:12 }}</p>
            <p class="hidden sm:block leading-none">{{ order.driver }}</p>
          </span>
        </div>
      </div>
      <!-- Date-->
      <div class="overflow-hidden flex">
        <div class="bg-sky-50 h-full justify-end text-end w-0 md:w-fit">
          <div class="flex flex-col opacity-0 md:opacity-100">
            <span class="text-xs text-gray-400 tracking-tighter">{{ order.modified_date|date }} {{ order.modified_date|time }} &nbsp;</span>
            <span class="text-xs text-gray-400 tracking-tighter">{{ order.modified_date|timesince }} &nbsp;</span>
          </div>
        </div>
        <!-- odo & km -->
        <div class="bg-sky-50 flex flex-col w-8 max-w-full h-full">
          <span class="text-end font-mono text-xs px-0.5 leading-0 {% if order.requires_odometer %} text-black {% else %} text-gray-400 {% endif %}">odo</span>
          <span class="text-end font-mono text-xs px-0.5 leading-0 {% if order.requires_kilometers %} text-black {% else %} text-gray-400 {% endif %}">km</span>
        </div>
      </div>
      <div class="w-32 min-w-max flex-grow-0 flex-shrink-0 flex flex-col">
        <div class="h-full space-x-1 ml-1 flex">
          <!-- fuel icons -->
          <div class="w-1/3 h-full bg-white flex justify-between text-xxs pt-[1px]">
            <img style="background-color:{{ order.tractor_fuel_type_color }};" class="h-5 aspect-fibbo-up" src="{% static 'svg/fuel_tractor.svg' %}" alt="" />
          </div>
          <div class="w-1/3 h-full bg-white flex justify-between text-xxs p-[1px]">
            <img style="background-color:{{ order.backpack_fuel_type_color }};" class="h-5 aspect-fibbo-up" src="{% static 'svg/fuel_chamber.svg' %}" alt="" />
          </div>
          <div class="w-1/3 h-full bg-white flex justify-between text-xxs p-[1px]">
            <img style="background-color:{{ order.chamber_fuel_type_color }};" class="h-5 aspect-fibbo-up" src="{% static 'svg/fuel_backpack.svg' %}" alt="" />
          </div>
        </div>
        <div class="h-full space-x-1 ml-1 flex">
          <!-- fuel values -->
          <div class="w-1/3 h-full bg-white text-xxs leading-tight font-mono font-bold flex justify-center">
            {% if order.tractor_liters and order.is_finished %} {{ order.tractor_liters }} {% else %} {{ order.formated_tractor_liters_to_load_of }} {% endif %}
          </div>
          <div class="w-1/3 h-full bg-white text-xxs leading-tight font-mono font-bold flex justify-center">
            {% if order.backpack_liters and order.is_finished %} {{ order.backpack_liters }} {% else %} {{ order.formated_backpack_liters_to_load_of }} {% endif %}
          </div>
          <div class="w-1/3 h-full bg-white text-xxs leading-tight font-mono font-bold flex justify-center">
            {% if order.chamber_liters and order.is_finished %} {{ order.chamber_liters }} {% else %} {{ order.formated_chamber_liters_to_load_of }} {% endif %}
          </div>
        </div>
      </div>
    </div>
    <div>{% row_fuelorder_buttons_component order %}</div>

    <!-- Sandwitch -->
    <div
      id="accordion-flush"
      data-accordion="collapse"
      data-active-classes="transform duration-100 rotate-90 {% status_color_component order.is_finished order.is_paused order.is_locked %}"
    >
      <button class="h-full aspect-1 flex ml-1 rounded-full" data-accordion-target="#row-toggle-body-{{ order.id }}" aria-expanded="false">
        <div class="h-full aspect-1 rounded-full">
          <img class="w-full h-full" src="{% static 'svg/sandwich.svg' %}" alt="Menu" />
        </div>
      </button>
    </div>
  </div>
</article>
